---
import Layout from "../layouts/Layout.astro";
import PostLink from "../components/PostLink.astro";
import Subscribe from "../components/Subscribe.astro";
import { Content as About } from "../content/about/about.md";
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

const featuredSlugs = [
  "personal-websites-are-important",
  "dont-trust-the-cascade",
  "inaction-is-a-slow-death",
  "what-i-want-from-life",
];

const unOrderedPosts = await getCollection("posts", (post) =>
  featuredSlugs.includes(post.slug),
);
const posts = unOrderedPosts.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
);
---

<Layout
  seo={{
    title: "Paul McBride | Nerd and Developer",
  }}
>
  <div
    class="grid grid-cols-main [&>*]:col-start-2 [&>*]:col-end-3 border-gray-200 mx-auto pb-16 px-8"
  >
    <div class="flex flex-col-reverse sm:flex-row items-start">
      <div class="flex flex-col pr-8 md:max-w-[80%]">
        <h1
          class="font-bold text-3xl md:text-5xl tracking-tight mb-1 text-gray-900 font-serif"
        >
          Paul McBride
        </h1>
        <h2 class="text-gray-700 mb-4 text-xl md:text-2xl md:leading-relaxed">
          Senior JavaScript Developer
        </h2>
        <p
          class="text-gray-600 mb-16 font-body text-xl leading-relaxed md:text-2xl md:leading-relaxed"
        >
          Hey, I&apos;m Paul. I&apos;m a software developer and instructor who
          loves using code to solve problems and bring ideas to life!
        </p>
      </div>
      <div class="w-[80px] sm:w-[176px] relative mb-8 sm:mb-0 mr-auto">
        <Image
          alt="Paul McBride"
          height={176}
          width={176}
          src="/avatar.jpeg"
          class="rounded-full"
        />
      </div>
    </div>
    <h3
      class="font-bold text-2xl md:text-4xl tracking-tight text-gray-900 font-serif mb-2"
    >
      About
    </h3>
    <div class="w-full prose prose-base md:prose-xl max-w-none mb-16 font-body">
      <About />
    </div>
    <h3
      class="font-bold text-2xl md:text-4xl tracking-tight mb-8 text-gray-900 font-serif"
    >
      Featured Posts
    </h3>
    <div class="flex flex-col">
      {
        posts.map((post) => (
          <PostLink
            title={post.data.title}
            teaser={post.data.description}
            slug={post.slug}
          />
        ))
      }
    </div>
    <a
      href="/posts"
      class="flex my-8 text-emerald-500 leading-7 rounded-lg hover:text-emerald-700 transition-all h-6 items-center"
    >
      Read all posts
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        class="h-6 w-6 ml-1"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width={2}
          d="M17.5 12h-15m11.667-4l3.333 4-3.333-4zm3.333 4l-3.333 4 3.333-4z"
        ></path>
      </svg>
    </a>

    <Subscribe />
  </div>
</Layout>
